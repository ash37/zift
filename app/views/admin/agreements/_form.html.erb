<%= form_with model: [:admin, @agreement], local: true do |f| %>
  <div class="grid grid-cols-1 gap-4">
    <div>
      <%= f.label :document_type, class: "block text-sm font-medium text-gray-700" %>
      <%= f.select :document_type, Agreement::DOCUMENT_TYPES.map { |t| [t.titleize, t] }, {}, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
    </div>
    <div>
      <%= f.label :version, class: "block text-sm font-medium text-gray-700" %>
      <%= f.number_field :version, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
    </div>
    <div>
      <%= f.label :title, class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :title, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm" %>
    </div>
    <div x-data="{ open: false }">
      <%= f.label :body, "Body (supports basic HTML and variables like {{ user.name }})", class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_area :body, rows: 16, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm font-mono" %>
      <button type="button" @click="open = !open" class="mt-2 text-sm text-violet-700 hover:underline">Formatting help</button>
      <div x-show="open" class="mt-2 text-sm text-gray-600">
        Allowed tags: <code>&lt;p&gt;</code>, <code>&lt;br&gt;</code>, <code>&lt;strong&gt;</code>, <code>&lt;em&gt;</code>, <code>&lt;u&gt;</code>,
        lists (<code>&lt;ul&gt;&lt;li&gt;</code>), headings (<code>&lt;h1&gt;</code>.. <code>&lt;h4&gt;</code>), <code>&lt;blockquote&gt;</code>,
        and tables (<code>&lt;table&gt;&lt;thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;&lt;td&gt;</code>).
        <br>
        Variables:
        <code>{{ user.name }}</code>, <code>{{ user.first_name }}</code>, <code>{{ user.email }}</code>, <code>{{ date.today }}</code>.
        <br>
        Location variables (when a location is provided):
        <code>{{ location.name }}</code>, <code>{{ location.address }}</code>, <code>{{ location.email }}</code>, <code>{{ location.phone }}</code>,
        <code>{{ location.representative_name }}</code>, <code>{{ location.representative_email }}</code>, <code>{{ location.ndis_number }}</code>,
        <code>{{ location.funding }}</code>, <code>{{ location.plan_manager_email }}</code>, <code>{{ location.gender }}</code>,
        <code>{{ location.lives_with }}</code>, <code>{{ location.pets }}</code>.
      </div>
    </div>
    <div class="flex items-center gap-2">
      <%= f.check_box :active, class: "rounded border-gray-300" %>
      <%= f.label :active, class: "text-sm text-gray-700" %>
    </div>
  </div>
  <div class="mt-6 flex justify-end gap-2">
    <%= link_to "Cancel", admin_agreements_path, class: "px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200" %>
    <%= f.submit class: "px-3 py-2 rounded-lg bg-violet-600 text-white hover:bg-violet-700" %>
  </div>
<% end %>
