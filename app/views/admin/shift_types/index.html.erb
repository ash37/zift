<div class="container mx-auto mt-10 px-4 py-10">
  <h1 class="text-3xl font-bold mb-6">Map Shift Types to Xero Earnings Rates</h1>

  <!-- Unmapped Shift Types -->
  <div class="bg-white p-6 rounded-lg shadow-md mb-8">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">Unmapped Shift Types</h2>
    <% unmapped_shift_types = @shift_types.where(xero_earnings_rate_id: nil) %>
    <% if unmapped_shift_types.any? %>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Our Shift Type
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Assign Xero Earnings Rate
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% unmapped_shift_types.each do |shift_type| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                <%= shift_type.name.titleize %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <%= form_with(model: [:admin, shift_type], method: :patch) do |form| %>
                  <div class="flex items-center space-x-2">
                    <%= form.collection_select :xero_earnings_rate_id, @xero_earnings_rates, :xero_earnings_rate_id, :name, { prompt: "Select Rate" }, { class: "block w-full rounded-md border-gray-300 shadow-sm" } %>
                    <%= form.submit "Save", class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
                  </div>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="text-gray-500">All shift types have been mapped.</p>
    <% end %>
  </div>

  <!-- Mapped Shift Types -->
  <div class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">Mapped Shift Types</h2>
    <% mapped_shift_types = @shift_types.where.not(xero_earnings_rate_id: nil) %>
    <% if mapped_shift_types.any? %>
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Our Shift Type
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Change Xero Earnings Rate
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% mapped_shift_types.each do |shift_type| %>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                <%= shift_type.name.titleize %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <%= form_with(model: [:admin, shift_type], method: :patch) do |form| %>
                  <div class="flex items-center space-x-2">
                    <%= form.collection_select :xero_earnings_rate_id, @xero_earnings_rates, :xero_earnings_rate_id, :name, {}, { class: "block w-full rounded-md border-gray-300 shadow-sm" } %>
                    <%= form.submit "Update", class: "bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded" %>
                  </div>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
       <p class="text-gray-500">No shift types have been mapped yet.</p>
    <% end %>
  </div>
</div>
