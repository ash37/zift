<div class="max-w-5xl mx-auto p-6">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold">Notifications</h1>
  </div>

  <% if @pending.any? %>
    
    <!-- Third view: table layout -->
   <div class="mt-8 overflow-hidden -mx-6 sm:mx-0 sm:rounded-3xl">
      <table class="min-w-full">
        <tbody class="bg-transparent">
          <% @pending.each do |req| %>
            <tr id="<%= dom_id(req, :row) %>" class="bg-white shadow-sm">
              <!-- Column 1: icon -->
              <td class="hidden sm:table-cell px-4 py-3 w-12 align-middle sm:rounded-l-xl">
                <div class="flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full <%= req.repeats_weekly? ? 'bg-orange-100' : 'bg-violet-100' %>">
                  <% if req.repeats_weekly? %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-orange-600">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
                    </svg>
                  <% else %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-violet-600">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zM3.75 17.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0z" />
                    </svg>
                  <% end %>
                </div>
              </td>
              <!-- Column 2: info -->
              <td class="px-4 sm:px-6 py-4 align-middle text-sm text-gray-800">
                <% if req.repeats_weekly? %>
                  <strong><%= req.user&.name || req.user&.email || "User ##{req.user_id}" %></strong> requested every <%= req.starts_at.strftime('%A') %> off.
                  <span class="rounded-md bg-violet-100 font-semibold px-2 py-1 text-xs text-violet-700"><%= display_range_or_allday(req.starts_at, req.ends_at) %></span>
                  <span class="text-gray-500">Reason:</span> <%= req.reason.presence || 'â€”' %>
                  <div class="mt-2 sm:hidden">
                    <%= link_to "Decline",
                        decline_unavailability_request_path(req, from: "notifications"),
                        data: { turbo_method: :patch },
                        class: "text-xs font-medium text-red-600" %>
                  </div>
                <% else %>
                  <% days = (req.ends_at.to_date - req.starts_at.to_date).to_i + 1 %>
                  <strong><%= req.user&.name || req.user&.email || "User ##{req.user_id}" %></strong>
                  requested <%= days %> <%= 'day'.pluralize(days) %> off.
                  <span class="rounded-md bg-violet-100 font-semibold px-2 py-1 text-xs text-violet-700"><%= display_range_or_allday(req.starts_at, req.ends_at) %></span>
                  <span class="text-gray-500">Reason:</span> <%= req.reason.presence || 'â€”' %>
                  <div class="mt-2 sm:hidden">
                    <%= link_to "Decline",
                        decline_unavailability_request_path(req, from: "notifications"),
                        data: { turbo_method: :patch },
                        class: "text-xs font-medium text-red-600" %>
                  </div>
                <% end %>
              </td>
              <!-- Column 3: actions -->
              <td class="px-4 sm:px-6 py-3 text-right align-top rounded-r-xl">
                <div class="inline-flex gap-2">
                  <%= button_to decline_unavailability_request_path(req, from: "notifications"),
                        method: :patch,
                        class: "hidden sm:flex items-start gap-3 p-3" do %>
                    <div class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-red-100 rounded-full">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                      </svg>
                    </div>
                  <% end %>
                  <%= button_to approve_unavailability_request_path(req, from: "notifications"),
                        method: :patch,
                        class: "flex items-start gap-3 p-3" do %>
                    <div class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-green-100 rounded-full">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                      </svg>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="bg-white border border-gray-200 rounded-lg p-8 text-center text-gray-500">
      No pending unavailability requests. ðŸŽ‰
    </div>
  <% end %>
</div>