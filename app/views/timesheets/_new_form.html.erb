<%= form_with(model: @timesheet, url: timesheets_path, method: :post) do |form| %>
  <% if @timesheet.errors.any? || @timesheet.shift.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mb-6">
      <h2>Errors prohibited this from being saved:</h2>
      <ul class="list-disc ml-6 mt-2">
        <% @timesheet.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        <% @timesheet.shift.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form.fields_for :shift, @timesheet.shift do |shift_form| %>
    <div class="mb-4">
      <%= shift_form.label :location_id, class: "block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1" %>
      <%= shift_form.collection_select :location_id, Location.all, :id, :name, { prompt: "Select a location" }, { class: "block w-full rounded-md border-gray-300 shadow-sm dark:text-gray-200", required: true } %>
    </div>
  <% end %>

  <p class="text-gray-600 mb-4 dark:text-gray-200">You are clocking in now: <%= Time.current.strftime("%-l:%M %p") %></p>

  <%= form.submit "Start Unscheduled Shift", class: "bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-3xl" %>
<% end %>