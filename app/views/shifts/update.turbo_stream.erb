<% new_user = @shift.user %>
<% new_date = @shift.start_time.to_date %>

<%= turbo_stream.replace dom_id(@roster, "cell_content_#{@old_user.id}_#{@old_date}") do %>
  <%= render 'rosters/cell_content', roster: @roster, user: @old_user, date: @old_date, selected_location_id: @selected_location_id %>
<% end %>

<% if @old_user != new_user || @old_date != new_date %>
  <%= turbo_stream.replace dom_id(@roster, "cell_content_#{new_user.id}_#{new_date}") do %>
    <%= render 'rosters/cell_content', roster: @roster, user: new_user, date: new_date, selected_location_id: @selected_location_id %>
  <% end %>
<% end %>

<%= turbo_stream.replace dom_id(@old_user, 'hours_total') do %>
  <%= render 'rosters/user_hours', roster: @roster, user: @old_user, selected_location_id: @selected_location_id %>
<% end %>

<% if @old_user != new_user %>
  <%= turbo_stream.replace dom_id(new_user, 'hours_total') do %>
    <%= render 'rosters/user_hours', roster: @roster, user: new_user, selected_location_id: @selected_location_id %>
  <% end %>
<% end %>

<%= turbo_stream.replace dom_id(@roster, "daily_hours_#{@old_date.to_s}") do %>
  <%= render 'rosters/daily_hours', roster: @roster, date: @old_date, selected_location_id: @selected_location_id %>
<% end %>

<% if @old_date != new_date %>
  <%= turbo_stream.replace dom_id(@roster, "daily_hours_#{new_date.to_s}") do %>
    <%= render 'rosters/daily_hours', roster: @roster, date: new_date, selected_location_id: @selected_location_id %>
  <% end %>
<% end %>

<%= turbo_stream.replace "assign_shift_modal", "" %>